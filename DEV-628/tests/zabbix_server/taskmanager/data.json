[
    {
        "successfully close the problem" : {
            "tested_function" : "try_task_closes_problem",
            "in" : {
                "names" : ["taskid"],
                "values" : [1]
            },
            "out" : {
                "names" : ["return"],
                "values" : [0]
            },
            "db_data" : {
                "task_close_problem_events" : {
                    "fields" : ["userid", "eventid", "objectid"],
                    "rows" : [
                        [1, 1, 1]
                    ]
                },
                "problem" : {
                    "fields" : [],
                    "rows" : [
                        []
                    ]
                }
            },
            "functions" : {
                "DCconfig_lock_triggers_by_triggerids" : {
                    "out": {
                        "params" : ["triggerids"],
                        "values" : [1]
                    }
                }
            }
        }
    },
    {
        "cannot find a task in the db" : {
        "tested_function" : "try_task_closes_problem",
            "in" : {
                "names" : ["taskid"],
                "values" : [1]
            },
            "out" : {
                "names" : ["return"],
                "values" : [-1]
            },
            "db_data" : {
                "task_close_problem_events" : {
                    "fields" : [],
                    "rows" : [
                        []
                    ]
                }
            }
        }
    },
    {
        "fail close the problem if source trigger was not locked" : {
            "tested_function" : "try_task_closes_problem",
            "in" : {
                "names" : ["taskid"],
                "values" : [1]
            },
            "out" : {
                "names" : ["return"],
                "values" : [-1]
            },
            "db_data" : {
                "task_close_problem_events" : {
                    "fields" : ["userid", "eventid", "objectid"],
                    "rows" : [
                        [1, 1, 1]
                    ]
                },
                "problem" : {
                    "fields" : [],
                    "rows" : [
                        []
                    ]
                }
            },
            "functions" : {
                "DCconfig_lock_triggers_by_triggerids" : {
                    "out": {
                        "params" : [],
                        "values" : []
                    }
                }
            }
        }
    }
]
